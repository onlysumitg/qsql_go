{{define "title"}}
Servers
{{end}}

{{define "content"}}
 
<div class="row p-2">
  <div class="col">
    <div class="card ">
      <div class="card-header">
        <p class="h5">Servers 
          <a data-toggle="tooltip" data-placement="bottom" title="Add new server"
           class="btn btn-ghost-info float-right" href="/servers/add">+Add</a></p>
      </div>
      <div class="card-body">

    <table id="serverslist"   class="table   table-borderless table-responsive-sm table-striped    ">
      <thead class="thead-dark">
        <tr>
            <th>Name</th>
            <th><span>On Hold?</span></th>

            <th>IP</th>
            <th>Work Lib</th>
            <th>Port</th>
            <th>SSL</th>
            <th>NOT allowed</th>
           
            <th>User</th>
            <th>Options </th>

        </tr>
          </thead>
          <tbody>
            {{if .Servers}}

        {{range .Servers}}
        <tr>
            <td><a {{if not .OnHold }} href='/servers/select/{{.ID}}?next={{$.Next}}'  {{ end }}>{{.Name}}</a></td>
           
            <td data-toggle="tooltip" data-placement="top" title="{{.OnHoldMessage}}">
              {{if .OnHold}}
              <p class="text-danger h5  ">{{yesNo .OnHold}}</p>
              {{else}}
              {{yesNo .OnHold}}
              {{end}}
            </td>
            <td>{{.IP}}</td>
            <td>{{.WorkLib}}</td>
            <td>{{.Port}}</td>
            <td>{{yesNo .Ssl}}</td>
            <td> 
              <span class="text-danger h6">
              {{if not .AllowInsert}} INSERT  {{end}}
              {{if not .AllowUpdate}} UPDATE  {{end}}
              {{if not .AllowDelete}} DELETE  {{end}} 

              </span>
            </td>
           
            <td>{{.UserName}}</td>
            <td>
                  {{if not .OnHold }}
                     <a class="btn btn-primary" href='/servers/select/{{.ID}}?next={{$.Next}}'>Select</a> 
                  {{ end }}
                     <a class="btn btn-info" href='/servers/update/{{.ID}}'  >Edit</a> 
                     <a class="btn btn-danger" href='/servers/delete/{{.ID}}'  >Delete</a>

            </td>

        </tr>
        {{end}}
        {{end}}
          </tbody>
        </table>


      </div>
    </div>
  </div>
</div>
   
  
  {{end}}


{{define "aftercontent"}}

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.js"></script>

<script>
  
    $(document).ready( function () {
      $('#serverslist').DataTable(
          {
              "language": {
                "emptyTable": "No records. Please add a new server."
              }
          }
      );
  } );
</script>
{{end}}